@{
    ViewData["Title"] = "Chat con Bot";
}

<h1>@ViewData["Title"]</h1>

<div>
    <input type="text" id="userMessage" placeholder="Escribe tu mensaje..." />
    <button id="sendButton">Enviar</button>
</div>
<div id="chatOutput"></div>

@section Scripts {
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#sendButton").click(async function() {
                const message = $("#userMessage").val();
                if (message) {
                    const response = await fetch('/Chat/SendMessage', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(message),
                    });

                    if (response.ok) {
                        const botResponse = await response.text();
                        $("#chatOutput").append(`<p><strong>Bot:</strong> ${botResponse}</p>`);
                    } else {
                        console.error("Error al enviar el mensaje:", response.statusText);
                    }

                    $("#userMessage").val('');
                }
            });
        });
    </script>
}
